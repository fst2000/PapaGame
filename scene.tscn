[gd_scene load_steps=12 format=3 uid="uid://kcitbrqc4c4w"]

[ext_resource type="PackedScene" uid="uid://duug0fs235wm2" path="res://floor.tscn" id="1_x28mb"]
[ext_resource type="Script" path="res://playerController.gd" id="2_4e5oi"]
[ext_resource type="PackedScene" uid="uid://cdsx0e6ggm7rf" path="res://player.tscn" id="2_o5jo5"]
[ext_resource type="Script" path="res://camera.gd" id="3_mbivt"]
[ext_resource type="PackedScene" uid="uid://uvmo2828gbpt" path="res://enemy.tscn" id="4_34flo"]

[sub_resource type="Environment" id="Environment_6mbsu"]
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_energy = 0.5

[sub_resource type="NavigationMesh" id="NavigationMesh_h08u4"]
vertices = PackedVector3Array(-9.5, -0.48, -0.25, -7, -0.48, -0.25, -6.75, -0.48, -2, -6.75, -0.48, -2, -4.5, -0.48, -2, -4.5, -0.48, -4.75, -4.5, -0.48, -4.75, -3, -0.48, -5, -3, -0.48, -9.5, -9.5, -0.48, -0.25, -6.75, -0.48, -2, -4.5, -0.48, -4.75, -3, -0.48, -9.5, -9.5, -0.48, -9.5, -1.25, -0.48, -2, -2, -0.48, -1.5, -1.75, -0.48, -0.75, -0.5, -0.48, -0.5, 0.75, -0.48, -1, 0.5, -0.48, -2, -0.5, -0.48, -0.5, -0.5, -0.48, 0.5, 0.5, -0.48, 0.5, 0.75, -0.48, -1, -1.25, -0.48, -4.75, -1.25, -0.48, -2, 0.5, -0.48, -2, 0.5, -0.48, -4.75, -3, -0.48, -5, -1.25, -0.48, -4.75, 0.5, -0.48, -4.75, 2.25, -0.48, -5, 2.25, -0.48, -9.5, -3, -0.48, -9.5, 0.75, -0.48, -1, 2.25, -0.48, -1, 2.25, -0.48, -1.75, 0.5, -0.48, -2, 3.75, -0.48, -2, 2.25, -0.48, -1.75, 2.25, -0.48, -1, 3.75, -0.48, -0.75, 3.75, -0.48, -4.75, 3.75, -0.48, -2, 4, -0.48, 2.5, 9.5, -0.48, 2.5, 9.5, -0.48, -9.5, 3.75, -0.48, -0.75, 3.5, -0.48, 2.25, 4, -0.48, 2.5, 3.75, -0.48, -2, 3.75, -0.48, -0.75, 4, -0.48, 2.5, 2.25, -0.48, -9.5, 2.25, -0.48, -5, 3.75, -0.48, -4.75, 9.5, -0.48, -9.5, -3.5, 1.47, -4, -3.5, 1.47, -2.75, -2.25, 1.47, -2.75, -2.25, 1.47, -4, 1.5, 1.47, -4, 1.5, 1.47, -2.75, 2.75, 1.47, -2.75, 2.75, 1.47, -4, -3.25, -0.48, -3.75, -3.25, -0.48, -3, -2.5, -0.48, -3, -2.5, -0.48, -3.75, 1.75, -0.48, -3.75, 1.75, -0.48, -3, 2.5, -0.48, -3, 2.5, -0.48, -3.75, -6, 1.51, -1, -6, 1.51, 0.25, -4.75, 1.51, 0.25, -4.75, 1.51, -1, -5.75, -0.48, -0.75, -5.75, -0.48, 0, -5, -0.48, 0, -5, -0.48, -0.75, -4.5, -0.48, 1.75, -4.5, -0.48, 1.25, -6.75, -0.48, 1.25, -3.75, -0.48, 2, -4.5, -0.48, 1.75, -6.75, -0.48, 1.25, -9.5, -0.48, 9.5, -4, -0.48, 9.5, -6.75, -0.48, 1.25, -7, -0.48, -0.25, -9.5, -0.48, -0.25, -9.5, -0.48, 9.5, 1.5, 1.47, 0, 1.5, 1.47, 1.25, 2.75, 1.47, 1.25, 2.75, 1.47, 0, 1.75, -0.48, 0.25, 1.75, -0.48, 1, 2.5, -0.48, 1, 2.5, -0.48, 0.25, 0.5, -0.48, 0.5, -0.5, -0.48, 0.5, -0.75, -0.48, 1.5, 0.75, -0.48, 2.25, 4, -0.48, 2.5, 0.75, -0.48, 2.25, -2.5, -0.48, 2.25, -4, -0.48, 9.5, 4, -0.48, 9.5, -0.75, -0.48, 1.5, -2, -0.48, 1.5, -2.5, -0.48, 2.25, 0.75, -0.48, 2.25, -2.5, -0.48, 2.25, -3.75, -0.48, 2, -4, -0.48, 9.5, 4, -0.48, 2.5, 3.5, -0.48, 2.25, 0.75, -0.48, 2.25, 4, -0.48, 9.5, 9.5, -0.48, 9.5, 9.5, -0.48, 2.5, 4, -0.48, 2.5)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(8, 7, 6), PackedInt32Array(10, 9, 11), PackedInt32Array(11, 9, 13), PackedInt32Array(11, 13, 12), PackedInt32Array(15, 14, 16), PackedInt32Array(16, 14, 17), PackedInt32Array(17, 14, 19), PackedInt32Array(17, 19, 18), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 23), PackedInt32Array(27, 26, 24), PackedInt32Array(24, 26, 25), PackedInt32Array(29, 28, 30), PackedInt32Array(30, 28, 31), PackedInt32Array(31, 28, 33), PackedInt32Array(31, 33, 32), PackedInt32Array(35, 34, 36), PackedInt32Array(36, 34, 37), PackedInt32Array(39, 38, 40), PackedInt32Array(40, 38, 41), PackedInt32Array(43, 42, 44), PackedInt32Array(44, 42, 45), PackedInt32Array(45, 42, 46), PackedInt32Array(49, 48, 47), PackedInt32Array(52, 51, 50), PackedInt32Array(54, 53, 55), PackedInt32Array(55, 53, 56), PackedInt32Array(60, 59, 57), PackedInt32Array(57, 59, 58), PackedInt32Array(64, 63, 61), PackedInt32Array(61, 63, 62), PackedInt32Array(68, 67, 65), PackedInt32Array(65, 67, 66), PackedInt32Array(72, 71, 69), PackedInt32Array(69, 71, 70), PackedInt32Array(76, 75, 73), PackedInt32Array(73, 75, 74), PackedInt32Array(80, 79, 77), PackedInt32Array(77, 79, 78), PackedInt32Array(83, 82, 81), PackedInt32Array(85, 84, 86), PackedInt32Array(86, 84, 88), PackedInt32Array(86, 88, 87), PackedInt32Array(90, 89, 91), PackedInt32Array(91, 89, 92), PackedInt32Array(96, 95, 93), PackedInt32Array(93, 95, 94), PackedInt32Array(100, 99, 97), PackedInt32Array(97, 99, 98), PackedInt32Array(102, 101, 103), PackedInt32Array(103, 101, 104), PackedInt32Array(106, 105, 107), PackedInt32Array(107, 105, 109), PackedInt32Array(107, 109, 108), PackedInt32Array(111, 110, 112), PackedInt32Array(112, 110, 113), PackedInt32Array(116, 115, 114), PackedInt32Array(117, 119, 118), PackedInt32Array(123, 122, 120), PackedInt32Array(120, 122, 121)]
cell_height = 0.01
agent_height = 0.5

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_4omkr"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="BoxMesh" id="BoxMesh_g3nsm"]

[sub_resource type="BoxMesh" id="BoxMesh_uy6u6"]
size = Vector3(2, 2, 2)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_vwawt"]
data = PackedVector3Array(-1, 1, 1, 1, 1, 1, -1, -1, 1, 1, 1, 1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, -1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1, 1, 1, 1, 1, 1, -1, 1, -1, 1, 1, 1, -1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1, 1, 1, -1, -1, -1, -1, 1, 1, -1, -1, 1, -1, -1, -1, 1, 1, 1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1, -1, 1, 1, -1, -1, -1, 1, 1, -1, 1, -1, -1, -1, 1, -1, 1, 1, -1, -1, -1, -1, -1)

[node name="Scene" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_6mbsu")

[node name="Player" parent="." node_paths=PackedStringArray("_camera") instance=ExtResource("2_o5jo5")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.478475, 0)
_camera = NodePath("../Camera3D")
_controllerRes = ExtResource("2_4e5oi")

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("_origin")]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 4.38836, 5)
script = ExtResource("3_mbivt")
_origin = NodePath("../Player")

[node name="AudioListener3D" type="AudioListener3D" parent="Camera3D"]
current = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.93145, 0.153167, -0.330062, 0.208384, 0.519063, 0.828945, 0.29829, -0.8409, 0.451564, 0, 2.17718, 4.10608)
light_color = Color(1, 0.917647, 0.85098, 1)
light_angular_distance = 1.0
shadow_normal_bias = 10.0
directional_shadow_mode = 0
directional_shadow_fade_start = 0.112

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_h08u4")

[node name="Floor" parent="NavigationRegion3D" instance=ExtResource("1_x28mb")]

[node name="Boxes" type="Node3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.2182, 0.459045, 0.715095)

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/Boxes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.2182, -0.459045, -0.715095)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Boxes/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.53226, 0, 0.309771)
shape = SubResource("ConcavePolygonShape3D_4omkr")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/Boxes/StaticBody3D/CollisionShape3D"]
mesh = SubResource("BoxMesh_g3nsm")
skeleton = NodePath("../../../../..")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="NavigationRegion3D/Boxes/StaticBody3D"]
transform = Transform3D(0.623102, 0, -0.782141, 0, 1, 0, 0.782141, 0, 0.623102, -3.1507, -0.51069, -1.08947)
shape = SubResource("ConcavePolygonShape3D_4omkr")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/Boxes/StaticBody3D/CollisionShape3D2"]
mesh = SubResource("BoxMesh_g3nsm")
skeleton = NodePath("../..")

[node name="CollisionShape3D3" type="CollisionShape3D" parent="NavigationRegion3D/Boxes/StaticBody3D"]
transform = Transform3D(-0.223488, 0, -0.974707, 0, 1, 0, 0.974707, 0, -0.223488, -3.1526, -0.0711315, 0.960644)
shape = SubResource("ConcavePolygonShape3D_4omkr")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/Boxes/StaticBody3D/CollisionShape3D3"]
mesh = SubResource("BoxMesh_g3nsm")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/Boxes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.51997, 0.0318832, -1.03671)
mesh = SubResource("BoxMesh_uy6u6")
skeleton = NodePath("../../..")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/Boxes/MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Boxes/MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_vwawt")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="NavigationRegion3D/Boxes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0, -4)
mesh = SubResource("BoxMesh_uy6u6")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/Boxes/MeshInstance3D2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Boxes/MeshInstance3D2/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_vwawt")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="NavigationRegion3D/Boxes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -4)
mesh = SubResource("BoxMesh_uy6u6")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/Boxes/MeshInstance3D3"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Boxes/MeshInstance3D3/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_vwawt")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="NavigationRegion3D/Boxes"]
mesh = SubResource("BoxMesh_uy6u6")
skeleton = NodePath("../MeshInstance3D")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/Boxes/MeshInstance3D4"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/Boxes/MeshInstance3D4/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_vwawt")

[node name="CharacterBody3D" parent="." instance=ExtResource("4_34flo")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 7)
